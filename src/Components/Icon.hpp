// src/Components/Icon.hpp

#pragma once

#include <raylib.h>

#include <string>

/// @brief UI-компонент, представляющий кликабельную иконку.
/// Управляет собственным ресурсом - текстурой. Загружает ее при создании
/// и автоматически выгружает при уничтожении.
class Icon
{
public:
    /// @brief Конструктор. Загружает текстуру из файла и вычисляет границы.
    /// @param texturePath Путь к файлу с изображением.
    /// @param position Позиция верхнего левого угла иконки на экране.
    Icon(const std::string& texturePath, Vector2 position);

    /// @brief Деструктор. Выгружает текстуру из памяти GPU.
    ~Icon();

    // Запрещаем копирование, чтобы избежать двойного освобождения текстуры.
    Icon(const Icon&) = delete;
    Icon& operator=(const Icon&) = delete;

    /// @brief Обновляет состояние и анимацию иконки. Должен вызываться каждый кадр.
    void Update();

    /// @brief Отрисовывает иконку.
    /// Не изменяет состояние объекта, поэтому помечен как const.
    void Draw() const;  // Улучшение: Добавлен const

    /// @brief Проверяет, находится ли точка (курсор) в границах иконки.
    /// @param point Координаты точки для проверки.
    /// @return true, если точка внутри, иначе false.
    bool IsClicked() const;  // Улучшение: Добавлен const

private:
    Texture2D _texture;  ///< Ресурс текстуры, управляемый этим объектом.
    Vector2 _position;   ///< Позиция на экране.
    Rectangle _bounds;   ///< Границы для проверки столкновений.

    // --- НОВЫЕ ПОЛЯ ДЛЯ АНИМАЦИИ ---
    Color _baseTint;        ///< Базовый оттенок (обычно белый - без изменений).
    Color _hoverTint;       ///< Оттенок при наведении (например, серый).
    Color _currentTint;     ///< Текущий оттенок, который плавно меняется.
    float _animationSpeed;  ///< Скорость перехода цвета.
    bool _isHovered;        ///< Наведен ли курсор на иконку?
    bool _isClicked;        ///< Была ли иконка нажата в этом кадре?
};